{"remainingRequest":"H:\\audio-visual\\manager_ui\\vue_blog_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\audio-visual\\manager_ui\\vue_blog_system\\src\\page\\login\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"H:\\audio-visual\\manager_ui\\vue_blog_system\\src\\page\\login\\login.vue","mtime":1605885992265},{"path":"H:\\audio-visual\\manager_ui\\vue_blog_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\audio-visual\\manager_ui\\vue_blog_system\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\audio-visual\\manager_ui\\vue_blog_system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"H:\\audio-visual\\manager_ui\\vue_blog_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\audio-visual\\manager_ui\\vue_blog_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHNvYlVzZXI6IHsNCiAgICAgICAgdXNlck5hbWU6ICIiLA0KICAgICAgICBwYXNzd29yZDogIiIsDQogICAgICB9LA0KDQogICAgICBsb2dpbkluZm86IHsNCiAgICAgICAgdmVyaWZ5Q29kZTogIiIsDQogICAgICAgIGNhcHRjaGFfa2V5OiAiIiwNCiAgICAgIH0sDQogICAgICBjYXB0Y2hhUGF0aDogIiIsDQogICAgfTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgdG9hc3RFcnJvcihtc2cpIHsNCiAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICBtZXNzYWdlOiBtc2csDQogICAgICAgIGNlbnRlcjogdHJ1ZSwNCiAgICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgIH0pOw0KICAgIH0sDQogICAga2V5RG93bihlKSB7DQogICAgICAvL+WmguaenOaYr+Wbnui9puWImeaJp+ihjOeZu+W9leaWueazlQ0KICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykgew0KICAgICAgICB0aGlzLmRvTG9naW4oKTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgZG9Mb2dpbigpIHsNCiAgICAgIGlmICh0aGlzLnNvYlVzZXIudXNlck5hbWUgPT09ICIiKSB7DQogICAgICAgIHRoaXMudG9hc3RFcnJvcigi6LSm5Y+35LiN6IO95Li656m6Iik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLnNvYlVzZXIucGFzc3dvcmQgPT09ICIiKSB7DQogICAgICAgIHRoaXMudG9hc3RFcnJvcigi5a+G56CB5LiN6IO95Li656m6Iik7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmxvZ2luSW5mby52ZXJpZnlDb2RlID09PSAiIikgew0KICAgICAgICB0aGlzLnRvYXN0RXJyb3IoIumqjOivgeeggeS4jeiDveS4uuepuiIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLiRheGlvcyh7DQogICAgICAgIG1ldGhvZDogInBvc3QiLA0KICAgICAgICB1cmw6DQogICAgICAgICAgIi91c2VyLyIgKw0KICAgICAgICAgIHRoaXMubG9naW5JbmZvLnZlcmlmeUNvZGUgKw0KICAgICAgICAgICIvIiArDQogICAgICAgICAgdGhpcy5sb2dpbkluZm8uY2FwdGNoYV9rZXksDQogICAgICAgIGRhdGE6IHRoaXMuc29iVXNlciwNCiAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4gew0KICAgICAgICBjb25zb2xlLmxvZygicmVzdWx0ID0+IiArIHJlc3VsdC5kYXRhKTsNCiAgICAgICAgbGV0IGRhdGEgPSByZXN1bHQuZGF0YTsNCiAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMjAwMDApIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSwNCiAgICAgICAgICAgIGNlbnRlcjogdHJ1ZSwNCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2luZGV4Iik7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy51cGRhdGFWZXJpZnlDb2RlKCk7DQogICAgICAgICAgdGhpcy50b2FzdEVycm9yKGRhdGEubWVzc2FnZSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgdXBkYXRhVmVyaWZ5Q29kZSgpIHsNCiAgICAgIHRoaXMuY2FwdGNoYVBhdGggPQ0KICAgICAgICAiL3VzZXIvY2FwdGNoYT9jYXB0Y2hhS2V5PSIgKw0KICAgICAgICB0aGlzLmxvZ2luSW5mby5jYXB0Y2hhX2tleSArDQogICAgICAgICImcmFuZG9tPSIgKw0KICAgICAgICBEYXRlLnBhcnNlKG5ldyBEYXRlKCkpOw0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5sb2dpbkluZm8uY2FwdGNoYV9rZXkgPSBEYXRlLnBhcnNlKG5ldyBEYXRlKCkpOw0KICAgIHRoaXMudXBkYXRhVmVyaWZ5Q29kZSgpOw0KDQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCB0aGlzLmtleURvd24pOw0KICB9LA0KICBkZXN0cm95ZWQoKSB7DQogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleWRvd24iLCB0aGlzLmtleURvd24sIGZhbHNlKTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/page/login","sourcesContent":["<template>\r\n  <div class=\"admin-login-box\">\r\n    <div class=\"admin-login-header-box\">\r\n      <div class=\"admin-login-header-center center\">\r\n        <div class=\"admin-login-logo\">光子影音后台系统|登录</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"admin-login-center-box\">\r\n      <div class=\"login-center-box center\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"11\">\r\n            <el-form label-position=\"right\" label-width=\"80px\">\r\n              <el-form-item label=\"账号\" required>\r\n                <el-input\r\n                  v-model=\"sobUser.userName\"\r\n                  placeholder=\"用户名\"\r\n                ></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"密码\" required>\r\n                <el-input\r\n                  v-model=\"sobUser.password\"\r\n                  placeholder=\"密码\"\r\n                  type=\"password\"\r\n                ></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"验证码\" required>\r\n                <el-input\r\n                  v-model=\"loginInfo.verifyCode\"\r\n                  placeholder=\"请输入验证码\"\r\n                  class=\"captcha-code-input-box\"\r\n                ></el-input>\r\n                <img\r\n                  :src=\"captchaPath\"\r\n                  @click=\"updataVerifyCode\"\r\n                  class=\"captcha_code\"\r\n                />\r\n              </el-form-item>\r\n\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"doLogin\" size=\"small\">\r\n                  登 录\r\n                </el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      sobUser: {\r\n        userName: \"\",\r\n        password: \"\",\r\n      },\r\n\r\n      loginInfo: {\r\n        verifyCode: \"\",\r\n        captcha_key: \"\",\r\n      },\r\n      captchaPath: \"\",\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    toastError(msg) {\r\n      this.$message({\r\n        message: msg,\r\n        center: true,\r\n        type: \"error\",\r\n      });\r\n    },\r\n    keyDown(e) {\r\n      //如果是回车则执行登录方法\r\n      if (e.keyCode == 13) {\r\n        this.doLogin();\r\n      }\r\n    },\r\n\r\n    doLogin() {\r\n      if (this.sobUser.userName === \"\") {\r\n        this.toastError(\"账号不能为空\");\r\n        return;\r\n      }\r\n      if (this.sobUser.password === \"\") {\r\n        this.toastError(\"密码不能为空\");\r\n        return;\r\n      }\r\n      if (this.loginInfo.verifyCode === \"\") {\r\n        this.toastError(\"验证码不能为空\");\r\n        return;\r\n      }\r\n      this.$axios({\r\n        method: \"post\",\r\n        url:\r\n          \"/user/\" +\r\n          this.loginInfo.verifyCode +\r\n          \"/\" +\r\n          this.loginInfo.captcha_key,\r\n        data: this.sobUser,\r\n      }).then((result) => {\r\n        console.log(\"result =>\" + result.data);\r\n        let data = result.data;\r\n        if (data.code === 20000) {\r\n          this.$message({\r\n            message: data.message,\r\n            center: true,\r\n            type: \"success\",\r\n          });\r\n          this.$router.push(\"/index\");\r\n        } else {\r\n          this.updataVerifyCode();\r\n          this.toastError(data.message);\r\n        }\r\n      });\r\n    },\r\n    updataVerifyCode() {\r\n      this.captchaPath =\r\n        \"/user/captcha?captchaKey=\" +\r\n        this.loginInfo.captcha_key +\r\n        \"&random=\" +\r\n        Date.parse(new Date());\r\n    },\r\n  },\r\n  mounted() {\r\n    this.loginInfo.captcha_key = Date.parse(new Date());\r\n    this.updataVerifyCode();\r\n\r\n    window.addEventListener(\"keydown\", this.keyDown);\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener(\"keydown\", this.keyDown, false);\r\n  }\r\n};\r\n</script>\r\n\r\n<style >\r\n.captcha_code {\r\n  cursor: pointer;\r\n  width: 100px;\r\n  height: 40px;\r\n  vertical-align: middle;\r\n  margin-left: 10px;\r\n  border: solid 1px #e6e6e6;\r\n}\r\n\r\n.admin-login-header-box {\r\n  width: 100%;\r\n  height: 46px;\r\n  background:  #262d47;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.center {\r\n  margin: 0 auto;\r\n  width: 1140px;\r\n}\r\n\r\n.admin-login-header-center {\r\n  line-height: 46px;\r\n}\r\n\r\n.login-center-box .el-input {\r\n  width: 70%;\r\n}\r\n\r\n.login-center-box {\r\n  border-radius: 4px;\r\n  width: 1100px;\r\n  padding: 20px;\r\n  background: #ffffff;\r\n  box-shadow: 0 1px 10px #afafaf;\r\n}\r\n\r\n.admin-login-logo {\r\n  color: #ffffff;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n}\r\n\r\n.login-cneter-box .el-input inner {\r\n  border: solid 1px #e6e6e6;\r\n  height: 42px;\r\n  border-radius: 0;\r\n}\r\n\r\n.login-center-box .el-form-item label {\r\n  background: #fbfbfb;\r\n  border-left: solid 1px #e6e6e6;\r\n  border-top: solid 1px #e6e6e6;\r\n  border-bottom: solid 1px #e6e6e6;\r\n  text-align: center;\r\n}\r\n</style>"]}]}