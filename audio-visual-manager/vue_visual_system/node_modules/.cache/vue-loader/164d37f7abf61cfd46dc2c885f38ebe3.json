{"remainingRequest":"H:\\audio-visual\\audio-visual-manager\\vue_visual_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\audio-visual\\audio-visual-manager\\vue_visual_system\\src\\page\\login\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"H:\\audio-visual\\audio-visual-manager\\vue_visual_system\\src\\page\\login\\login.vue","mtime":1616759478776},{"path":"H:\\audio-visual\\audio-visual-manager\\vue_visual_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\audio-visual\\audio-visual-manager\\vue_visual_system\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"H:\\audio-visual\\audio-visual-manager\\vue_visual_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\audio-visual\\audio-visual-manager\\vue_visual_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIFVzZXI6IHsNCiAgICAgICAgbmFtZTogIiIsDQogICAgICAgIHBhc3N3b3JkOiAiIiwNCiAgICAgIH0sDQoNCiAgICAgIGxvZ2luSW5mbzogew0KICAgICAgICB2ZXJpZnlDb2RlOiAiIiwNCiAgICAgICAgY2FwdGNoYV9rZXk6ICIiLA0KICAgICAgfSwNCiAgICAgIGNhcHRjaGFQYXRoOiAiIiwNCiAgICB9Ow0KICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICB0b2FzdEVycm9yKG1zZykgew0KICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgIG1lc3NhZ2U6IG1zZywNCiAgICAgICAgY2VudGVyOiB0cnVlLA0KICAgICAgICB0eXBlOiAiZXJyb3IiLA0KICAgICAgfSk7DQogICAgfSwNCiAgICBrZXlEb3duKGUpIHsNCiAgICAgIC8v5aaC5p6c5piv5Zue6L2m5YiZ5omn6KGM55m75b2V5pa55rOVDQogICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7DQogICAgICAgIHRoaXMuZG9Mb2dpbigpOw0KICAgICAgfQ0KICAgIH0sDQoNCiAgICBkb0xvZ2luKCkgew0KICAgICAgaWYgKHRoaXMuVXNlci5uYW1lID09PSAiIikgew0KICAgICAgICB0aGlzLnRvYXN0RXJyb3IoIui0puWPt+S4jeiDveS4uuepuiIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBpZiAodGhpcy5Vc2VyLnBhc3N3b3JkID09PSAiIikgew0KICAgICAgICB0aGlzLnRvYXN0RXJyb3IoIuWvhueggeS4jeiDveS4uuepuiIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBpZiAodGhpcy5sb2dpbkluZm8udmVyaWZ5Q29kZSA9PT0gIiIpIHsNCiAgICAgICAgdGhpcy50b2FzdEVycm9yKCLpqozor4HnoIHkuI3og73kuLrnqboiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgdGhpcy4kYXhpb3Moew0KICAgICAgICBtZXRob2Q6ICJwb3N0IiwNCiAgICAgICAgdXJsOg0KICAgICAgICAgICIvdXNlci8iICsNCiAgICAgICAgICB0aGlzLmxvZ2luSW5mby52ZXJpZnlDb2RlICsNCiAgICAgICAgICAiLyIgKw0KICAgICAgICAgIHRoaXMubG9naW5JbmZvLmNhcHRjaGFfa2V5LA0KICAgICAgICBkYXRhOiB0aGlzLlVzZXIsDQogICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coInJlc3VsdCA9PiIgKyByZXN1bHQuZGF0YSk7DQogICAgICAgIGxldCBkYXRhID0gcmVzdWx0LmRhdGE7DQogICAgICAgIGlmIChkYXRhLmNvZGUgPT09IDIwMDAwKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UsDQogICAgICAgICAgICBjZW50ZXI6IHRydWUsDQogICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9pbmRleCIpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMudXBkYXRhVmVyaWZ5Q29kZSgpOw0KICAgICAgICAgIHRoaXMudG9hc3RFcnJvcihkYXRhLm1lc3NhZ2UpOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIHVwZGF0YVZlcmlmeUNvZGUoKSB7DQogICAgICB0aGlzLmNhcHRjaGFQYXRoID0NCiAgICAgICAgIi91c2VyL2NhcHRjaGE/Y2FwdGNoYUtleT0iICsNCiAgICAgICAgdGhpcy5sb2dpbkluZm8uY2FwdGNoYV9rZXkgKw0KICAgICAgICAiJnJhbmRvbT0iICsNCiAgICAgICAgRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKTsNCiAgICB9LA0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMubG9naW5JbmZvLmNhcHRjaGFfa2V5ID0gRGF0ZS5wYXJzZShuZXcgRGF0ZSgpKTsNCiAgICB0aGlzLnVwZGF0YVZlcmlmeUNvZGUoKTsNCg0KICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgdGhpcy5rZXlEb3duKTsNCiAgfSwNCiAgZGVzdHJveWVkKCkgew0KICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCJrZXlkb3duIiwgdGhpcy5rZXlEb3duLCBmYWxzZSk7DQogIH0NCn07DQo="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/page/login","sourcesContent":["<template>\r\n  <div class=\"admin-login-box\">\r\n    <div class=\"admin-login-header-box\">\r\n      <div class=\"admin-login-header-center center\">\r\n        <div class=\"admin-login-logo\">光子影音后台系统|登录</div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"admin-login-center-box\">\r\n      <div class=\"login-center-box center\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"11\">\r\n            <el-form label-position=\"right\" label-width=\"80px\">\r\n              <el-form-item label=\"账号\" required>\r\n                <el-input\r\n                  v-model=\"User.name\"\r\n                  placeholder=\"用户名\"\r\n                ></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"密码\" required>\r\n                <el-input\r\n                  v-model=\"User.password\"\r\n                  placeholder=\"密码\"\r\n                  type=\"password\"\r\n                ></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"验证码\" required>\r\n                <el-input\r\n                  v-model=\"loginInfo.verifyCode\"\r\n                  placeholder=\"请输入验证码\"\r\n                  class=\"captcha-code-input-box\"\r\n                ></el-input>\r\n                <img\r\n                  :src=\"captchaPath\"\r\n                  @click=\"updataVerifyCode\"\r\n                  class=\"captcha_code\"\r\n                />\r\n              </el-form-item>\r\n\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"doLogin\" size=\"small\">\r\n                  登 录\r\n                </el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </el-col>\r\n        </el-row>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      User: {\r\n        name: \"\",\r\n        password: \"\",\r\n      },\r\n\r\n      loginInfo: {\r\n        verifyCode: \"\",\r\n        captcha_key: \"\",\r\n      },\r\n      captchaPath: \"\",\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    toastError(msg) {\r\n      this.$message({\r\n        message: msg,\r\n        center: true,\r\n        type: \"error\",\r\n      });\r\n    },\r\n    keyDown(e) {\r\n      //如果是回车则执行登录方法\r\n      if (e.keyCode == 13) {\r\n        this.doLogin();\r\n      }\r\n    },\r\n\r\n    doLogin() {\r\n      if (this.User.name === \"\") {\r\n        this.toastError(\"账号不能为空\");\r\n        return;\r\n      }\r\n      if (this.User.password === \"\") {\r\n        this.toastError(\"密码不能为空\");\r\n        return;\r\n      }\r\n      if (this.loginInfo.verifyCode === \"\") {\r\n        this.toastError(\"验证码不能为空\");\r\n        return;\r\n      }\r\n      this.$axios({\r\n        method: \"post\",\r\n        url:\r\n          \"/user/\" +\r\n          this.loginInfo.verifyCode +\r\n          \"/\" +\r\n          this.loginInfo.captcha_key,\r\n        data: this.User,\r\n      }).then((result) => {\r\n        console.log(\"result =>\" + result.data);\r\n        let data = result.data;\r\n        if (data.code === 20000) {\r\n          this.$message({\r\n            message: data.message,\r\n            center: true,\r\n            type: \"success\",\r\n          });\r\n          this.$router.push(\"/index\");\r\n        } else {\r\n          this.updataVerifyCode();\r\n          this.toastError(data.message);\r\n        }\r\n      });\r\n    },\r\n    updataVerifyCode() {\r\n      this.captchaPath =\r\n        \"/user/captcha?captchaKey=\" +\r\n        this.loginInfo.captcha_key +\r\n        \"&random=\" +\r\n        Date.parse(new Date());\r\n    },\r\n  },\r\n  mounted() {\r\n    this.loginInfo.captcha_key = Date.parse(new Date());\r\n    this.updataVerifyCode();\r\n\r\n    window.addEventListener(\"keydown\", this.keyDown);\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener(\"keydown\", this.keyDown, false);\r\n  }\r\n};\r\n</script>\r\n\r\n<style >\r\n.captcha_code {\r\n  cursor: pointer;\r\n  width: 100px;\r\n  height: 40px;\r\n  vertical-align: middle;\r\n  margin-left: 10px;\r\n  border: solid 1px #e6e6e6;\r\n}\r\n\r\n.admin-login-header-box {\r\n  width: 100%;\r\n  height: 46px;\r\n  background:  #262d47;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.center {\r\n  margin: 0 auto;\r\n  width: 1140px;\r\n}\r\n\r\n.admin-login-header-center {\r\n  line-height: 46px;\r\n}\r\n\r\n.login-center-box .el-input {\r\n  width: 70%;\r\n}\r\n\r\n.login-center-box {\r\n  border-radius: 4px;\r\n  width: 1100px;\r\n  padding: 20px;\r\n  background: #ffffff;\r\n  box-shadow: 0 1px 10px #afafaf;\r\n}\r\n\r\n.admin-login-logo {\r\n  color: #ffffff;\r\n  font-size: 20px;\r\n  font-weight: 600;\r\n}\r\n\r\n.login-cneter-box .el-input inner {\r\n  border: solid 1px #e6e6e6;\r\n  height: 42px;\r\n  border-radius: 0;\r\n}\r\n\r\n.login-center-box .el-form-item label {\r\n  background: #fbfbfb;\r\n  border-left: solid 1px #e6e6e6;\r\n  border-top: solid 1px #e6e6e6;\r\n  border-bottom: solid 1px #e6e6e6;\r\n  text-align: center;\r\n}\r\n</style>"]}]}