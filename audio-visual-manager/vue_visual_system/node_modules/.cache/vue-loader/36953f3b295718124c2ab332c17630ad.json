{"remainingRequest":"H:\\audio-visual\\manager_ui\\vue_blog_system\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!H:\\audio-visual\\manager_ui\\vue_blog_system\\src\\page\\operaton\\manager-category.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"H:\\audio-visual\\manager_ui\\vue_blog_system\\src\\page\\operaton\\manager-category.vue","mtime":1605949926815},{"path":"H:\\audio-visual\\manager_ui\\vue_blog_system\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\audio-visual\\manager_ui\\vue_blog_system\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"H:\\audio-visual\\manager_ui\\vue_blog_system\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"H:\\audio-visual\\manager_ui\\vue_blog_system\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"H:\\audio-visual\\manager_ui\\vue_blog_system\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KDQoudGFibGUgew0KICB3aWR0aDogOTAwcHg7DQogIGhlaWdodDogNDAwcHg7DQogIG1hcmdpbjogMTAwcHggYXV0bzsNCn0NCi8q5pu05pS56KGo5qC86aKc6ImyKi8NCi5kb3VibGUgew0KICBiYWNrZ3JvdW5kOiAjMjYyZDQ3ICFpbXBvcnRhbnQ7DQp9DQouc2luZ2xlIHsNCiAgYmFja2dyb3VuZDogIzJhMzE0ZCAhaW1wb3J0YW50Ow0KfQ0KDQouY2F0ZWdvcnktbGlzdC1ib3h7DQogIG1hcmdpbi10b3A6IDIwcHg7DQp9DQoNCg0KLmVsLXRhYmxlX19ib2R5IHRyOmhvdmVyPnRkIHsNCgkJYmFja2dyb3VuZC1jb2xvcjogIzEzNDA4NyAhaW1wb3J0YW50Ow0KfQ0KDQo="},{"version":3,"sources":["manager-category.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA","file":"manager-category.vue","sourceRoot":"src/page/operaton","sourcesContent":["<template>\r\n  <div class=\"category-box\">\r\n    <div class=\"category-action-bar\">\r\n      <el-button type=\"info\" size=\"mini\" @click=\"addItemLable\"\r\n        >添加分类</el-button\r\n      >\r\n    </div>\r\n    <div class=\"category-list-box\">\r\n      <el-table\r\n        :data=\"\r\n          lables.slice((currentPage - 1) * pagesize, currentPage * pagesize)\r\n        \"\r\n          style=\"width: 100%\"\r\n         class=\"table_color\"\r\n         :row-class-name=\"tableRowClassName\"\r\n        :header-cell-style=\"getRowClass\"\r\n      >\r\n      <el-table-column width=\"21\"></el-table-column>\r\n        <el-table-column prop=\"id\" label=\"id\" width=\"200\">\r\n            <template slot-scope=\"scope\">\r\n            <span v-text=\"scope.row.id\" style =\"width: 200px;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;color: white; font-weight: bold\"></span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"name\" label=\"标签名\" width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n            <span v-text=\"scope.row.name\" style =\"width: 240px;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;color: white; font-weight: bold\"></span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"count\" label=\"数量\" width=\"80\">\r\n          <template slot-scope=\"scope\">\r\n            <span v-text=\"scope.row.count\" style =\"width: 80;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;color: white; font-weight: bold\"></span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"创建时间\" width=\"240\">\r\n          <template slot-scope=\"scope\">\r\n            <span v-text=\"formatDate(scope.row.createTime)\" style =\"width: 80;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;color: white; font-weight: bold\"></span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"updateTime\" label=\"修改时间\" width=\"220\">\r\n          <template slot-scope=\"scope\">\r\n            <span v-text=\"formatDate(scope.row.updateTime)\" style =\"width: 80;overflow: hidden;white-space: nowrap;text-overflow: ellipsis;color: white; font-weight: bold\"></span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"操作\" width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"edit(scope.row)\" >\r\n              编辑\r\n            </el-button>\r\n\r\n            <el-button type=\"danger\" size=\"mini\" @click=\"deleteItem(scope.row)\">\r\n              删除\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n\r\n         <el-table-column width=\"175\"></el-table-column>\r\n      </el-table>\r\n      <div class=\"lables-dialog-box\">\r\n        <el-dialog\r\n          title=\"删除提示\"\r\n          :visible.sync=\"deleteDialogShow\"\r\n          width=\"400px\"\r\n        >\r\n          <span\r\n            >你确定要删除<strong>\r\n              <font color=\"red\">{{ deleleteMessage }}</font> </strong\r\n            >这个标签</span\r\n          >\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"cancelItem\" size=\"mini\" type=\"danger\"\r\n              >取 消</el-button\r\n            >\r\n            <el-button type=\"primary\" @click=\"doDeleteItem\" size=\"mini\"\r\n              >确 定</el-button\r\n            >\r\n          </span>\r\n        </el-dialog>\r\n\r\n        <el-dialog :title=\"lableText\" :visible.sync=\"editLable\" width=\"600px\">\r\n          <div class=\"lable-add_box\">\r\n            <el-form label-width=\"80px\">\r\n              <el-form-item label=\"标签名称\">\r\n                <el-input v-model=\"lablesItems.name\" @input=\"change($event)\" ></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"标签数量\">\r\n                <el-input v-model=\"lablesItems.count\" @input=\"change($event)\" ></el-input>\r\n              </el-form-item>\r\n            </el-form>\r\n          </div>\r\n\r\n          <span slot=\"footer\" class=\"dialog-footer\">\r\n            <el-button @click=\"cancelAddItem\" size=\"mini\" type=\"danger\"\r\n              >取 消</el-button\r\n            >\r\n            <el-button type=\"primary\" @click=\"addItem\" size=\"mini\"\r\n              >确 定</el-button\r\n            >\r\n          </span>\r\n        </el-dialog>\r\n      </div>\r\n      <div class=\"pagination\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-sizes=\"[8, 9, 10]\"\r\n          :page-size=\"pagesize\"\r\n          layout=\"total, sizes,prev, pager, next\"\r\n          :total=\"lables.length\"\r\n            background=\"#171c30\"\r\n        >\r\n        </el-pagination>\r\n      </div>\r\n    </div>\r\n    <div class=\"navigation-bar\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport * as dataUtils from \"../../utils/date\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentPage: 1, //默认显示页面为1\r\n      pagesize: 8, //    每页的数据条数\r\n      lables: [], //需要data定义一些，tableData定义一个空数组，请求的数据都是存放这里面\r\n      deleteDialogShow: false,\r\n      deleleteMessage: \"\",\r\n      deleteTargeId: \"\",\r\n      lableText: \"\",\r\n      editLable: false,\r\n      lablesItems: [\r\n        {\r\n          name: \"\",\r\n          count: \"\",\r\n        },\r\n      ],\r\n      labelId: null,\r\n    };\r\n  },\r\n  methods: {\r\n\r\n  //控制行颜色\r\n    tableRowClassName({ row, rowIndex }) {\r\n      if ((rowIndex + 1) % 2 === 0) {\r\n        return \"double\"; //对应的类\r\n      } else {\r\n        return \"single\"; //对应的类\r\n      }\r\n    },\r\n    //控制表格头部颜色\r\n    getRowClass({ rowIndex }) {\r\n      if (rowIndex == 0) {\r\n        return \"background:#2d3a5c\";\r\n      } else {\r\n        return \"\";\r\n      }\r\n    },\r\n\r\n      keyDown(e) {\r\n      //如果是回车则执行登录方法\r\n      if (e.keyCode == 13) {\r\n        this.addItem();\r\n      }\r\n    },\r\n\r\n\r\n    edit: function (item) {\r\n      this.lablesItems.name = item.name;\r\n      this.lablesItems.count = item.count;\r\n      this.labelId = item.id;\r\n      this.lableText = \"修改标签\";\r\n      this.editLable = true;\r\n    },\r\n\r\n    addItemLable: function () {\r\n      this.editLable = true;\r\n      this.lableText = \"添加标签\";\r\n    },\r\n\r\n    sendMessage: function (msg, msgType) {\r\n      this.$message({\r\n        message: msg,\r\n        center: true,\r\n        type: msgType,\r\n      });\r\n    },\r\n\r\n    addItem: function () {\r\n      if (this.labelId === null) {\r\n        console.log(\"执行的添加方法\");\r\n        this.$axios\r\n          .post(\"/test/label/\", {\r\n            name: this.lablesItems.name,\r\n            count: this.lablesItems.count,\r\n          })\r\n          .then((result) => {\r\n            console.log(\"result =>\" + result.data);\r\n            if (result.data.code === 20000) {\r\n              this.sendMessage(\"添加成功\", \"success\");\r\n              this.getData();\r\n            } else {\r\n              this.sendMessage(\"添加失败\", \"error\");\r\n            }\r\n          }),\r\n          (response) => {\r\n            this.sendMessage(\"请求失败\", \"error\");\r\n          };\r\n      } else {\r\n        console.log(\"执行的编辑方法\");\r\n        this.$axios\r\n          .put(\"/test/label/\" + this.labelId, {\r\n            name: this.lablesItems.name,\r\n            count: this.lablesItems.count,\r\n          })\r\n          .then((result) => {\r\n            console.log(\"result =>\" + result.data);\r\n            if (result.data.code === 20000) {\r\n              this.sendMessage(\"修改成功\", \"success\");\r\n              this.getData();\r\n            } else {\r\n              this.sendMessage(\"修改失败\", \"error\");\r\n            }\r\n          }),\r\n          (response) => {\r\n            this.sendMessage(\"请求失败\", \"error\");\r\n          };\r\n        this.labelId = null;\r\n      }\r\n      this.lablesItems = {};\r\n      this.editLable = false;\r\n    },\r\n\r\n    deleteItem: function (item) {\r\n      this.deleteDialogShow = true;\r\n      this.deleleteMessage = item.name;\r\n      this.deleteTargeId = item.id;\r\n      console.log(item);\r\n    },\r\n\r\n    cancelItem: function () {\r\n      this.deleteDialogShow = false;\r\n    },\r\n\r\n    cancelAddItem: function () {\r\n      this.editLable = false;\r\n    },\r\n\r\n    doDeleteItem: function () {\r\n      this.$axios.delete(\"/test/label/\" + this.deleteTargeId).then(\r\n        (response) => {\r\n            console.log(response.data);\r\n        },\r\n        (response) => {}\r\n      );\r\n      this.sendMessage(\"删除成功\", \"success\");\r\n      this.getData();\r\n      this.deleteDialogShow = false;\r\n    },\r\n\r\n    formatDate: function (dataStr) {\r\n      let data = new Date(dataStr);\r\n      return dataUtils.formatDate(data, \"yyyy年MM月dd日 hh:mm:ss\");\r\n    },\r\n\r\n    getData() {\r\n      this.$axios.get(\"/test/label/list/0/0\").then(\r\n        (response) => {\r\n          console.log(response.data);\r\n          this.lables = response.data.data.content;\r\n        },\r\n        (response) => {\r\n          console.log(\"error\");\r\n        }\r\n      );\r\n    },\r\n    //每页下拉显示数据\r\n    handleSizeChange: function (size) {\r\n      this.pagesize = size;\r\n      /*console.log(this.pagesize) */\r\n    },\r\n    //点击第几页\r\n    handleCurrentChange: function (currentPage) {\r\n      this.currentPage = currentPage;\r\n      /*console.log(this.currentPage) */\r\n    },\r\n\r\n     change(e){\r\n      this.$forceUpdate();\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.getData();\r\n      window.addEventListener(\"keydown\", this.keyDown);\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener(\"keydown\", this.keyDown, false);\r\n  }\r\n  \r\n};\r\n</script>\r\n<style >\r\n\r\n.table {\r\n  width: 900px;\r\n  height: 400px;\r\n  margin: 100px auto;\r\n}\r\n/*更改表格颜色*/\r\n.double {\r\n  background: #262d47 !important;\r\n}\r\n.single {\r\n  background: #2a314d !important;\r\n}\r\n\r\n.category-list-box{\r\n  margin-top: 20px;\r\n}\r\n\r\n\r\n.el-table__body tr:hover>td {\r\n\t\tbackground-color: #134087 !important;\r\n}\r\n\r\n</style>"]}]}